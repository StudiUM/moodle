define ("core_calendar/calendar_mini",["jquery","core/str","core_calendar/selectors","core_calendar/events","core_calendar/view_manager"],function(a,b,c,d,e){var f=function(b){var c=a("body"),e="."+b.attr("id");c.on(d.created+e,b,g);c.on(d.deleted+e,b,g);c.on(d.updated+e,b,g);c.on(d.eventMoved+e,b,g)},g=function(b){var f=b.data,g=a("body"),h="."+f.attr("id");if(f.is(":visible")){e.reloadCurrentMonth(f);f.find(c.groupSelector).val(0)}else{g.off(d.created+h);g.off(d.deleted+h);g.off(d.updated+h);g.off(d.eventMoved+h)}},h=function(f){a("body").on(d.filterChanged,function(a,b){var d=f.find(c.eventType[b.type]);d.toggleClass("calendar_event_"+b.type,!b.hidden)});var g="."+f.attr("id");a("body").on("change"+g,c.elements.courseSelector,function(){if(f.is(":visible")){var b=a(this),d=b.val(),h=f.find(c.elements.courseSelector),i=f.find(c.elements.groupSelector),j=i.children().first();i.empty();i.append("<option value=\""+j.val()+"\">"+j.text()+"</option>");if(1<d){e.reloadGroupSelector(d).done(function(b){if(0===b.length){a("#coursegroupslabel").hide();i.hide();h.addClass("mr-auto")}else{a("#coursegroupslabel").show();i.show();h.removeClass("mr-auto");a.each(b,function(b,c){a("<option/>",{value:c.id,text:15<c.name.length?c.name.substring(0,14)+"...":c.name}).appendTo(i)})}})}else{i.hide();h.addClass("mr-auto")}e.reloadCurrentMonth(f,d,null)}else{a("body").off("change"+g)}});f.on("change",c.elements.groupSelector,function(){var d=parseInt(a(this).val()),e=f.find(c.eventType.group),g=a("#nogroups"),h=0;if(0<g.length){g.remove()}if(0<e.length){a.each(e,function(b,c){var e=a(c);if(0===d||e.data("event-groupid")===d){e.show();h++}else{e.hide()}});if(0===h){var i=a(".eventlist"),j=a("<span id=\"nogroups\" class=\"calendar-information calendar-no-results\"></span>").appendTo(i);b.get_string("nogroupevents","core_calendar").done(function(a){j.text(a)})}}})};return{init:function init(b,c){b=a(b);e.init(b);h(b);f(b);if(c){e.reloadCurrentMonth(b)}}}});
//# sourceMappingURL=calendar_mini.min.js.map
