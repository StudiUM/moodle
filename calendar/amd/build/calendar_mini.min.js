define ("core_calendar/calendar_mini",["jquery","core_calendar/selectors","core_calendar/events","core_calendar/view_manager"],function(a,b,c,d){var e=function(b){var d=a("body"),e="."+b.attr("id");d.on(c.created+e,b,f);d.on(c.deleted+e,b,f);d.on(c.updated+e,b,f);d.on(c.eventMoved+e,b,f)},f=function(b){var e=b.data,f=a("body"),g="."+e.attr("id");if(e.is(":visible")){d.reloadCurrentMonth(e)}else{f.off(c.created+g);f.off(c.deleted+g);f.off(c.updated+g);f.off(c.eventMoved+g)}},g=function(f){a("body").on(c.filterChanged,function(a,c){var d=f.find(b.eventType[c.type]);d.toggleClass("calendar_event_"+c.type,!c.hidden)});var g="."+f.attr("id");a("body").on("change"+g,b.elements.courseSelector,function(){if(f.is(":visible")){var c=a(this),e=c.val(),h=f.find(b.elements.courseSelector),i=f.find(b.elements.groupSelector),j=i.children().first();i.empty();i.append("<option value=\""+j.val()+"\">"+j.text()+"</option>");if(1<e){d.reloadGroupSelector(e).done(function(b){if(0===b.length){i.hide();h.addClass("mr-auto")}else{i.show();h.removeClass("mr-auto");a.each(b,function(b,c){a("<option/>",{value:c.id,text:15<c.name.length?c.name.substring(0,14)+"...":c.name}).appendTo(i)})}})}else{i.hide();h.addClass("mr-auto")}d.reloadCurrentMonth(f,e,null)}else{a("body").off("change"+g)}});f.on("change",b.elements.groupSelector,function(){var c=a(this),e=c.val(),g=f.find(b.elements.courseSelector).val();d.reloadCurrentMonth(f,g,null).then(function(){return f.find(b.elements.groupSelector).val(e)}).fail(Notification.exception)})};return{init:function init(b,c){b=a(b);d.init(b);g(b);e(b);if(c){d.reloadCurrentMonth(b)}}}});
//# sourceMappingURL=calendar_mini.min.js.map
